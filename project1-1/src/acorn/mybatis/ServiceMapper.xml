<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="service">
	<select id="getQnaList" parameterType="acorn.dto.QnaListDto" resultType="acorn.dto.QnaListDto">
		SELECT *
		FROM	(SELECT result1.*, ROWNUM rnum
				FROM (SELECT qna_listnum, qna_title, qna_pdnum, qna_writer, qna_content, 
						TO_CHAR(qna_regdate,'YYYY.MM.DD') AS qna_regdate 
						FROM qnalist 
						ORDER BY qna_listnum DESC) result1)
		WHERE rnum BETWEEN #{startRowNum} AND #{endRowNum} 
	</select>
	<select id="getCount" resultType="int">
		SELECT NVL(MAX(ROWNUM),0)
		FROM qnalist
	</select>
	<insert id="insertQna" parameterType="acorn.dto.QnaListDto">
		INSERT INTO qnalist(qna_listnum, qna_title, qna_pdnum, 
				qna_writer, qna_content, qna_regdate) 
		VALUES(qnalist_seq.NEXTVAL, #{qna_title}, #{qna_pdnum}, #{qna_writer}, #{qna_content} ,SYSDATE)
	</insert>
</mapper>